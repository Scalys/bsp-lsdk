From 91a02e2dea333ebd505632580b277844d9cc57bc Mon Sep 17 00:00:00 2001
From: Nicholas Pridybailo <nikolai.pridybailo@edality.by>
Date: Wed, 3 Apr 2019 11:20:36 +0300
Subject: [PATCH 2/9] Add initial configuration for grapeboard

---
 configs/grapeboard.cfg           | 111 +++++++++++++++++++++++++++++++
 configs/linux/linux_arm32_LS.its |  16 +++++
 configs/linux/linux_arm64_LS.its |  20 ++++++
 3 files changed, 147 insertions(+)
 create mode 100644 configs/grapeboard.cfg

diff --git a/configs/grapeboard.cfg b/configs/grapeboard.cfg
new file mode 100644
index 0000000..043f6df
--- /dev/null
+++ b/configs/grapeboard.cfg
@@ -0,0 +1,111 @@
+# default git repository URL
+GIT_REPOSITORY_URL="https://source.codeaurora.org/external/qoriq/qoriq-components"
+
+# LSDK version
+DISTRIB_NAME="NXP LSDK"
+DISTRIB_VERSION=19.03
+
+# default Layerscape ARM machine list for autobuild
+CONFIG_MACHINE_GRAPEBOARD=y
+
+# machine list with UEFI support
+uefi_machine_list="grapeboard"
+
+# set default distro Ubuntu/Debian codename
+distro_codename=bionic
+
+# set docker repo version
+fbdockerrepo=fbubuntu
+fbdockerimgversion=18.04
+
+# component repository list for autobuild
+firmware_repo_list="atf u-boot rcw qoriq-uefi-binary qoriq-fm-ucode mc-utils qoriq-mc-binary qoriq-qe-ucode qoriq-firmware-cortina qoriq-firmware-inphi qoriq-engine-pfe-bin ddr-phy-binary"
+linux_repo_list="linux cryptodev-linux lttng-modules"
+apps_repo_list="restool flib fmlib fmc spc dpdk vpp pktgen-dpdk ovs-dpdk openssl gpp-aioptool cst aiopsl ptpd ceetm dce qbman_userspace eth-config crconf iperf optee_os optee_client optee_test secure_obj libpkcs11 qoriq-edgescale-eds qoriq-eds-kubelet qoriq-eds-bootstrap openstack-nova"
+
+# default git tree and branch
+default_uboot_tree=u-boot
+default_linux_tree=linux
+
+# default linux config list
+linux_config_list_arm64="defconfig lsdk.config"
+linux_config_list_arm32v8="multi_v7_defconfig multi_v7_lpae.config multi_v8.config lsdk.config"
+linux_config_list_arm32v7="multi_v7_defconfig multi_v7_lpae.config lsdk.config"
+
+#kernel git repository
+linux_repo_url=http://192.168.42.170/lsdk/linux.git
+linux_repo_tag=LSDK-19.03-gb-V4.19
+
+# uboot git repository
+u_boot_repo_url=http://192.168.42.170/lsdk/uboot.git
+
+#linux modules git repository
+lttng_modules_repo_url=git://git.lttng.org/lttng-modules.git
+lttng_modules_repo_branch=master
+cryptodev_linux_repo_tag=LSDK-19.03
+
+# firmware git repositories
+rcw_repo=rcw
+rcw_repo_tag=LSDK-19.03
+u_boot_repo_tag=LSDK-19.03
+atf_repo_tag=LSDK-19.03
+mc_utils_repo_tag=LSDK-19.03
+qoriq_mc_binary_repo_url=https://github.com/nxp/qoriq-mc-binary.git
+qoriq_mc_binary_repo_tag=LSDK-19.03
+qoriq_qe_ucode_repo_url=https://github.com/nxp/qoriq-qe-ucode.git
+qoriq_qe_ucode_repo_tag=LSDK-19.03
+qoriq_fm_ucode_repo_url=https://github.com/nxp/qoriq-fm-ucode.git
+qoriq_fm_ucode_repo_tag=LSDK-19.03
+qoriq_firmware_cortina_repo_url=https://github.com/nxp/qoriq-firmware-cortina.git
+qoriq_firmware_cortina_repo_tag=LSDK-19.03
+qoriq_firmware_inphi_repo_url=https://github.com/nxp/qoriq-firmware-inphi.git
+qoriq_firmware_inphi_repo_tag=LSDK-19.03
+qoriq_uefi_binary_repo_url=https://github.com/nxp/qoriq-uefi-binary.git
+qoriq_uefi_binary_repo_tag=LSDK-19.03
+qoriq_engine_pfe_bin_repo_url=https://github.com/nxp/qoriq-engine-pfe-bin.git
+qoriq_engine_pfe_bin_repo_tag=LSDK-19.03
+ddr_phy_binary_repo_url=https://github.com/nxp/ddr-phy-binary.git
+ddr_phy_binary_repo_tag=LSDK-19.03
+
+# apps components git repositories
+restool_repo_tag=LSDK-19.03
+fmc_repo_tag=LSDK-19.03
+spc_repo_tag=LSDK-19.03
+dpdk_repo_tag=LSDK-19.03
+vpp_repo_tag=19.03-LSDK
+pktgen_dpdk_repo_url=https://dpdk.org/git/apps/pktgen-dpdk
+pktgen_dpdk_repo_tag=pktgen-3.4.3
+cst_repo_tag=LSDK-19.03
+aiopsl_repo_tag=LSDK-19.03
+ceetm_repo_tag=LSDK-19.03
+dce_repo_tag=LSDK-19.03
+flib_repo_tag=LSDK-19.03
+fmlib_repo_tag=LSDK-19.03
+openssl_repo_tag=LSDK-19.03
+gpp_aioptool_repo_tag=LSDK-19.03
+ovs_dpdk_repo_tag=LSDK-19.03
+qbman_userspace_repo_tag=LSDK-19.03
+eth_config_repo_tag=LSDK-19.03
+ptpd_repo_tag=LSDK-19.03
+crconf_repo_url=https://git.code.sf.net/p/crconf/code.git
+crconf_repo_branch=master
+iperf_repo_url=https://git.code.sf.net/p/iperf2/code.git
+iperf_repo_commit=1bc4619f874a14f51da2edfe800d23116b0bfa1e
+libpkcs11_repo_tag=LSDK-19.03
+secure_obj_repo_tag=LSDK-19.03
+optee_os_repo_tag=LSDK-19.03
+optee_client_repo_tag=LSDK-19.03
+optee_test_repo_tag=LSDK-19.03
+openstack_nova_repo_url=https://github.com/openstack/nova
+openstack_nova_repo_branch=stable/pike
+qoriq_edgescale_eds_repo_url=https://github.com/nxp/qoriq-edgescale-eds.git
+qoriq_edgescale_eds_repo_tag=LSDK-19.03
+qoriq_eds_bootstrap_repo_url=https://github.com/nxp/qoriq-eds-bootstrap.git
+qoriq_eds_bootstrap_repo_tag=LSDK-19.03
+qoriq_eds_kubelet_repo_url=https://github.com/nxp/qoriq-eds-kubelet.git
+qoriq_eds_kubelet_repo_tag=LSDK-19.03
+buildroot_repo_url=git://git.buildroot.net/buildroot.git
+buildroot_repo_branch=2018.11.x
+ramdiskrfs_url=https://www.nxp.com/lgfiles/sdk/lsdk
+ruby_src_url=https://cache.ruby-lang.org/pub/ruby/ruby-2.5.1.tar.gz
+iproute2_src_url=https://mirrors.edge.kernel.org/pub/linux/utils/net/iproute2/iproute2-4.15.0.tar.gz
\ No newline at end of file
diff --git a/configs/linux/linux_arm32_LS.its b/configs/linux/linux_arm32_LS.its
index 02743ac..3e80357 100644
--- a/configs/linux/linux_arm32_LS.its
+++ b/configs/linux/linux_arm32_LS.its
@@ -80,6 +80,15 @@
                         load = <0x9ffe0000>;
                 };
 
+                grapeboard-dtb {
+                        description = "Flattened Device Tree blob";
+                        data = /incbin/("../../build/linux/kernel/arm32/LS/grapeboard.dtb");
+                        type = "flat_dt";
+                        arch = "arm";
+                        compression = "none";
+                        load = <0x9ffe0000>;
+                };
+
                 ls1012afrwy-dtb {
                         description = "Flattened Device Tree blob";
                         data = /incbin/("../../build/linux/kernel/arm32/LS/fsl-ls1012a-frwy.dtb");
@@ -118,6 +127,13 @@
                         ramdisk = "initrd";
                 };
 
+                grapeboard {
+                        description = "Boot Linux kernel";
+                        kernel = "kernel-v8";
+                        fdt = "grapeboard-dtb";
+                        ramdisk = "initrd";
+                };
+
 		ls1012afrwy {
                         description = "Boot Linux kernel";
                         kernel = "kernel-v8";
diff --git a/configs/linux/linux_arm64_LS.its b/configs/linux/linux_arm64_LS.its
index af235bb..f44d73f 100644
--- a/configs/linux/linux_arm64_LS.its
+++ b/configs/linux/linux_arm64_LS.its
@@ -142,6 +142,19 @@
 				algo = "crc32";
 			};
 		};
+
+		grapeboard-dtb {
+			description = "grapeboard-dtb";
+			data = /incbin/("../../build/linux/kernel/arm64/LS/grapeboard.dtb");
+			type = "flat_dt";
+			arch = "arm64";
+			os = "linux";
+			compression = "none";
+			load = <0x90000000>;
+			hash@1 {
+				algo = "crc32";
+			};
+		};
 	};
 
 	configurations {
@@ -200,5 +213,12 @@
 			ramdisk = "initrd";
 			fdt = "lx2160ardb-dtb";
 		};
+
+		grapeboard {
+			description = "config for grapeboard";
+			kernel = "kernel";
+			ramdisk = "initrd";
+			fdt = "grapeboard-dtb";
+		};
 	};
 };
-- 
2.20.1

